{% extends 'base.html' %}

{% load static %}

{% load crispy_forms_tags %}

{% block content %}

<!-- Begin page content -->
<main class="flex-shrink-0">
	<div class="container" align="center">

		<p>&nbsp;</p>
		<h1 class="mt-3">&nbsp;</h1>
		<br />

		{% if not form.instance.pk %}

		<form id="shorten-form" method="POST">
			{% csrf_token %}
			{{ form|crispy }}
			<button id="randomTextButton" type="submit" class="btn btn-primary rounded-pill px-3">Shrink that link!</button>
		</form>
		<p>&nbsp;</p>
		<img src="{% static 'img/black-dynamite-can-you-dig-it.gif' %}" width="350" alt="Can you dig it?">

		{% else %}

		<p><a href="{% url 'shortener-create' %}"><button class="btn btn-primary rounded-pill px-3" type="button">Shorten another URL</button></a></p><br />

		{% endif %}
	<!-- container end -->
	</div>

</main>

<!-- JavaScript for randomizing button text -->
<script>
	const button = document.getElementById('randomTextButton');
	const buttonTexts = [
		"Shrink!",
		"Shrink it!",
		"Shrink that link!",
		"Give'r!",
		"Shrink that mofo!",
		"Shrink it or link it!",
		"Shrink link clowns that come around!",
		"Tell that MF link to chill!",
		"Shrink it and dig it...",
		"I ain't playin'",
		"Ain't nobody got time for no MF long links",
		"I ain't a player, I just link a lot",
		"I hate big links I cannot lie",
		"Ain't gonna get a long link outta me",
		"Zooma zoom zoom link shaker",
	];
	// Set random button text on page load
	const randomIndex = Math.floor(Math.random() * buttonTexts.length);
	button.textContent = buttonTexts[randomIndex];
</script>

{% endblock %}
